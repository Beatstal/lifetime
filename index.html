<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>Age Time – เครื่องคำนวณอายุแบบง่าย</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: radial-gradient(circle at top, #111827 0, #020617 45%, #000 100%);
      color: #e5e7eb;
    }

    .page {
      width: 100%;
      max-width: 720px;
      padding: 24px 16px 32px;
    }

    .card {
      background: radial-gradient(circle at top left, #111827 0, #020617 60%);
      border-radius: 26px;
      padding: 22px 20px 20px;
      border: 1px solid #374151;
      box-shadow: 0 32px 90px rgba(0,0,0,0.85);
    }

    .header {
      text-align: center;
      margin-bottom: 18px;
    }

    .icon {
      width: 70px;
      height: 70px;
      border-radius: 999px;
      margin: 0 auto 8px;
      background: radial-gradient(circle at 30% 20%, #4b5563, #111827);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 32px;
      box-shadow: 0 20px 50px rgba(15,23,42,0.9);
    }

    .title {
      font-size: 22px;
      font-weight: 700;
      color: #f9fafb;
    }

    .subtitle {
      margin-top: 4px;
      font-size: 12px;
      color: #9ca3af;
    }

    .layout {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 0.9fr);
      gap: 18px;
      margin-top: 12px;
    }

    @media (max-width: 780px) {
      .layout {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .panel {
      background: rgba(15,23,42,0.9);
      border-radius: 20px;
      border: 1px solid #1f2937;
      padding: 14px 14px 12px;
      box-shadow: 0 18px 40px rgba(0,0,0,0.9);
    }

    .panel-title {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 8px;
      color: #f9fafb;
    }

    .form-group {
      margin-bottom: 10px;
      font-size: 13px;
    }

    label {
      display: block;
      margin-bottom: 4px;
      color: #d1d5db;
    }

    .input,
    select {
      width: 100%;
      border-radius: 10px;
      border: 1px solid #4b5563;
      padding: 6px 9px;
      background: #020617;
      color: #e5e7eb;
      font-size: 13px;
      outline: none;
    }

    .input:focus,
    select:focus {
      border-color: #6366f1;
      box-shadow: 0 0 0 1px rgba(99,102,241,0.8);
    }

    .radio-row {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .radio-item {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 13px;
      color: #d1d5db;
    }

    .radio-item input {
      accent-color: #6366f1;
    }

    .inline {
      display: flex;
      gap: 8px;
      align-items: center;
      flex-wrap: wrap;
    }

    .inline span {
      font-size: 12px;
      color: #9ca3af;
    }

    .btn-row {
      display: flex;
      gap: 8px;
      margin-top: 8px;
      flex-wrap: wrap;
    }

    .btn {
      border-radius: 999px;
      border: none;
      padding: 7px 14px;
      font-size: 13px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-weight: 600;
    }

    .btn-primary {
      background: linear-gradient(135deg, #6366f1, #312e81);
      color: #e5e7eb;
      box-shadow: 0 15px 35px rgba(79,70,229,0.9);
      transition: transform .12s ease, box-shadow .12s ease, filter .12s ease;
    }

    .btn-primary:hover {
      transform: translateY(-1px);
      filter: brightness(1.05);
      box-shadow: 0 20px 45px rgba(55,65,194,1);
    }

    .btn-secondary {
      background: #111827;
      color: #9ca3af;
      border: 1px solid #4b5563;
    }

    .error {
      margin-top: 6px;
      font-size: 12px;
      color: #fca5a5;
      min-height: 16px;
    }

    /* Result */
    .result-main {
      background: radial-gradient(circle at top left, #111827, #020617);
      border-radius: 18px;
      padding: 12px 12px 10px;
      border: 1px solid #1f2937;
    }

    .result-label {
      font-size: 13px;
      color: #9ca3af;
    }

    .result-value {
      margin-top: 4px;
      font-size: 22px;
      font-weight: 700;
      color: #facc15;
    }

    .result-extra {
      margin-top: 6px;
      font-size: 12px;
      color: #9ca3af;
      line-height: 1.5;
    }

    .tip {
      margin-top: 8px;
      font-size: 11px;
      color: #6b7280;
    }
  </style>
</head>
<body>
  <div class="page">
    <div class="card">
      <header class="header">
        <div class="icon">⏳</div>
        <h1 class="title">Age Time – เครื่องคำนวณอายุ</h1>
        <p class="subtitle">
          เลือกวันเกิด แล้วดูว่าเราอยู่มาแล้วกี่ปี / วัน หรือเหลืออีกกี่ปีถึงอายุเป้าหมาย แบบคำนวณง่าย ๆ ไม่เล่นของซับซ้อนให้เสี่ยงบัค
        </p>
      </header>

      <div class="layout">
        <!-- LEFT: FORM -->
        <section class="panel">
          <div class="panel-title">ข้อมูลของผม</div>
          <form id="ageForm">
            <div class="form-group">
              <label for="dob">วันเกิด</label>
              <input type="date" id="dob" class="input" />
            </div>

            <div class="form-group">
              <label>โหมดการคำนวณ</label>
              <div class="radio-row">
                <label class="radio-item">
                  <input type="radio" name="mode" value="lived" checked />
                  ดูเวลาที่ผมมีชีวิตอยู่แล้ว
                </label>
                <label class="radio-item">
                  <input type="radio" name="mode" value="remaining" />
                  ดูเวลาที่ยังเหลือจนถึงอายุเป้าหมาย
                </label>
              </div>
            </div>

            <div class="form-group">
              <label for="targetAge">อายุเป้าหมาย (ใช้เมื่อเลือกโหมด “ยังเหลือ”)</label>
              <div class="inline">
                <input
                  type="number"
                  id="targetAge"
                  class="input"
                  min="1"
                  max="120"
                  value="80"
                  style="max-width:120px;"
                />
                <span>ปี (ถ้าไม่ได้กรอก จะใช้ 80 ปีเป็นค่าเริ่มต้น)</span>
              </div>
            </div>

            <div class="form-group">
              <label for="unit">อยากให้แสดงผลเป็นหน่วยอะไร</label>
              <select id="unit">
                <option value="years">ปี (ทศนิยม)</option>
                <option value="days">วัน</option>
                <option value="hours">ชั่วโมง</option>
                <option value="minutes">นาที</option>
                <option value="seconds">วินาที</option>
              </select>
            </div>

            <div class="btn-row">
              <button type="submit" class="btn btn-primary">คำนวณ</button>
              <button type="button" id="clearBtn" class="btn btn-secondary">ล้างค่า</button>
            </div>

            <div id="error" class="error"></div>
          </form>
        </section>

        <!-- RIGHT: RESULT -->
        <section class="panel result-main">
          <div class="panel-title">ผลลัพธ์</div>
          <div class="result-label" id="resultLabel">ยังไม่มีการคำนวณ</div>
          <div class="result-value" id="resultValue">--</div>
          <div class="result-extra" id="resultExtra">
            กรอกข้อมูลด้านซ้ายแล้วกดปุ่ม "คำนวณ" เพื่อดูผล
          </div>
          <p class="tip">
            การคำนวณนี้ใช้ค่าเฉลี่ย 1 ปี ≈ 365.25 วัน เพื่อให้โค้ดอ่านง่ายและลดโอกาสเจอปัญหาเรื่องโซนเวลา / ปีอธิกสุรทินครับ
          </p>
        </section>
      </div>
    </div>
  </div>

  <script>
    const MS_SECOND = 1000;
    const MS_MINUTE = 60 * MS_SECOND;
    const MS_HOUR   = 60 * MS_MINUTE;
    const MS_DAY    = 24 * MS_HOUR;
    const MS_YEAR   = 365.25 * MS_DAY; // เอาค่าเฉลี่ยง่าย ๆ พอ

    const form = document.getElementById("ageForm");
    const dobInput = document.getElementById("dob");
    const targetAgeInput = document.getElementById("targetAge");
    const unitSelect = document.getElementById("unit");
    const errorEl = document.getElementById("error");

    const resultLabelEl = document.getElementById("resultLabel");
    const resultValueEl = document.getElementById("resultValue");
    const resultExtraEl = document.getElementById("resultExtra");
    const clearBtn = document.getElementById("clearBtn");

    function formatNumber(n) {
      return n.toLocaleString("th-TH", { maximumFractionDigits: 2 });
    }

    form.addEventListener("submit", (e) => {
      e.preventDefault();
      errorEl.textContent = "";

      const dobValue = dobInput.value;
      if (!dobValue) {
        errorEl.textContent = "กรุณาเลือกวันเกิดก่อนครับ";
        return;
      }

      const dob = new Date(dobValue + "T00:00:00");
      const now = new Date();

      if (dob > now) {
        errorEl.textContent = "วันเกิดต้องไม่อยู่ในอนาคตนะครับ";
        return;
      }

      const diffMs = now.getTime() - dob.getTime();
      const mode = (document.querySelector("input[name='mode']:checked") || {}).value || "lived";
      const unit = unitSelect.value;

      let baseMs;
      let label;
      let extra;

      if (mode === "lived") {
        baseMs = diffMs;
        label = "ผมมีชีวิตอยู่แล้วประมาณ";
        const yearsApprox = diffMs / MS_YEAR;
        extra =
          "อายุโดยประมาณตอนนี้ ~ " +
          formatNumber(yearsApprox) +
          " ปี (ตามสูตร 1 ปี = 365.25 วัน)";
      } else {
        // remaining
        let targetAge = parseFloat(targetAgeInput.value);
        if (isNaN(targetAge) || targetAge <= 0) {
          targetAge = 80; // default safe
        }
        const targetTotalMs = targetAge * MS_YEAR;
        const remainingMs = targetTotalMs - diffMs;

        if (remainingMs <= 0) {
          baseMs = 0;
          label = "ผมเลยอายุเป้าหมายที่ตั้งไว้แล้ว";
          extra =
            "อายุเป้าหมายที่กำหนดไว้คือ " +
            formatNumber(targetAge) +
            " ปี และตอนนี้อายุมากกว่าหรือใกล้เคียงแล้ว";
        } else {
          baseMs = remainingMs;
          label = "เวลาที่ยังเหลือก่อนถึงอายุประมาณ " + formatNumber(targetAge) + " ปี คือ";
          const yearsLeft = remainingMs / MS_YEAR;
          extra =
            "ถ้าคิดเป็นปีแบบคร่าว ๆ เหลืออีกประมาณ " +
            formatNumber(yearsLeft) +
            " ปี (ค่าเฉลี่ย)";
        }
      }

      let value;
      let unitLabel;

      switch (unit) {
        case "years":
          value = baseMs / MS_YEAR;
          unitLabel = "ปี";
          break;
        case "days":
          value = baseMs / MS_DAY;
          unitLabel = "วัน";
          break;
        case "hours":
          value = baseMs / MS_HOUR;
          unitLabel = "ชั่วโมง";
          break;
        case "minutes":
          value = baseMs / MS_MINUTE;
          unitLabel = "นาที";
          break;
        case "seconds":
        default:
          value = baseMs / MS_SECOND;
          unitLabel = "วินาที";
          break;
      }

      resultLabelEl.textContent = label;
      resultValueEl.textContent = formatNumber(value) + " " + unitLabel;
      resultExtraEl.textContent = extra;
    });

    clearBtn.addEventListener("click", () => {
      dobInput.value = "";
      targetAgeInput.value = "80";
      unitSelect.value = "years";
      errorEl.textContent = "";
      resultLabelEl.textContent = "ยังไม่มีการคำนวณ";
      resultValueEl.textContent = "--";
      resultExtraEl.textContent = "กรอกข้อมูลด้านซ้ายแล้วกดปุ่ม \"คำนวณ\" เพื่อดูผล";
    });
  </script>
</body>
</html>
